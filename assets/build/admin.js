(()=>{var e={470:(e,t,s)=>{var n,o,r;o=[s(428)],void 0===(r="function"==typeof(n=function(e){var t=Array.prototype.slice,s=Array.prototype.splice,n={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1,zIndex:"auto"},o=e(window),r=e(document),a=[],c=o.height(),i=function(){for(var t=o.scrollTop(),s=r.height(),n=s-c,i=t>n?n-t:0,d=0,l=a.length;d<l;d++){var p=a[d],u=p.stickyWrapper.offset().top-p.topSpacing-i;if(p.stickyWrapper.css("height",p.stickyElement.outerHeight()),t<=u)null!==p.currentTop&&(p.stickyElement.css({width:"",position:"",top:"","z-index":""}),p.stickyElement.parent().removeClass(p.className),p.stickyElement.trigger("sticky-end",[p]),p.currentTop=null);else{var m,y=s-p.stickyElement.outerHeight()-p.topSpacing-p.bottomSpacing-t-i;y<0?y+=p.topSpacing:y=p.topSpacing,p.currentTop!==y&&(p.getWidthFrom?m=e(p.getWidthFrom).width()||null:p.widthFromWrapper&&(m=p.stickyWrapper.width()),null==m&&(m=p.stickyElement.width()),p.stickyElement.css("width",m).css("position","fixed").css("top",y).css("z-index",p.zIndex),p.stickyElement.parent().addClass(p.className),null===p.currentTop?p.stickyElement.trigger("sticky-start",[p]):p.stickyElement.trigger("sticky-update",[p]),p.currentTop===p.topSpacing&&p.currentTop>y||null===p.currentTop&&y<p.topSpacing?p.stickyElement.trigger("sticky-bottom-reached",[p]):null!==p.currentTop&&y===p.topSpacing&&p.currentTop<y&&p.stickyElement.trigger("sticky-bottom-unreached",[p]),p.currentTop=y);var g=p.stickyWrapper.parent();p.stickyElement.offset().top+p.stickyElement.outerHeight()>=g.offset().top+g.outerHeight()&&p.stickyElement.offset().top<=p.topSpacing?p.stickyElement.css("position","absolute").css("top","").css("bottom",0).css("z-index",""):p.stickyElement.css("position","fixed").css("top",y).css("bottom","").css("z-index",p.zIndex)}}},d=function(){c=o.height();for(var t=0,s=a.length;t<s;t++){var n=a[t],r=null;n.getWidthFrom?n.responsiveWidth&&(r=e(n.getWidthFrom).width()):n.widthFromWrapper&&(r=n.stickyWrapper.width()),null!=r&&n.stickyElement.css("width",r)}},l={init:function(t){var s=e.extend({},n,t);return this.each((function(){var t=e(this),o=t.attr("id"),r=o?o+"-"+n.wrapperClassName:n.wrapperClassName,c=e("<div></div>").attr("id",r).addClass(s.wrapperClassName);t.wrapAll(c);var i=t.parent();s.center&&i.css({width:t.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"===t.css("float")&&t.css({float:"none"}).parent().css({float:"right"}),s.stickyElement=t,s.stickyWrapper=i,s.currentTop=null,a.push(s),l.setWrapperHeight(this),l.setupChangeListeners(this)}))},setWrapperHeight:function(t){var s=e(t),n=s.parent();n&&n.css("height",s.outerHeight())},setupChangeListeners:function(e){window.MutationObserver?new window.MutationObserver((function(t){(t[0].addedNodes.length||t[0].removedNodes.length)&&l.setWrapperHeight(e)})).observe(e,{subtree:!0,childList:!0}):(e.addEventListener("DOMNodeInserted",(function(){l.setWrapperHeight(e)}),!1),e.addEventListener("DOMNodeRemoved",(function(){l.setWrapperHeight(e)}),!1))},update:i,unstick:function(t){return this.each((function(){for(var t=e(this),n=-1,o=a.length;o-- >0;)a[o].stickyElement.get(0)===this&&(s.call(a,o,1),n=o);-1!==n&&(t.unwrap(),t.css({width:"",position:"",top:"",float:"","z-index":""}))}))}};window.addEventListener?(window.addEventListener("scroll",i,!1),window.addEventListener("resize",d,!1)):window.attachEvent&&(window.attachEvent("onscroll",i),window.attachEvent("onresize",d)),e.fn.sticky=function(s){return l[s]?l[s].apply(this,t.call(arguments,1)):"object"!=typeof s&&s?void e.error("Method "+s+" does not exist on jQuery.sticky"):l.init.apply(this,arguments)},e.fn.unstick=function(s){return l[s]?l[s].apply(this,t.call(arguments,1)):"object"!=typeof s&&s?void e.error("Method "+s+" does not exist on jQuery.sticky"):l.unstick.apply(this,arguments)},e((function(){setTimeout(i,0)}))})?n.apply(t,o):n)||(e.exports=r)},428:e=>{"use strict";e.exports=window.jQuery}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}(()=>{"use strict";s(470),jQuery,document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("central_site"),t=document.getElementById("subsites-row"),s=document.getElementById("ccm-notice"),n=document.getElementById("ccm-network-settings-form"),o=document.getElementById("ccm-central-settings-form"),r=document.querySelector(".spinner");if("undefined"!=typeof editor&&void 0!==wp.data){const e=wp.data.subscribe((function(){const t=wp.data.select("core/editor").getCurrentPostId(),s=wp.data.select("core/editor").getCurrentPostType();t&&s&&(e(),function(e,t){fetch(siteConfig.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"restrict_post_modification",ajax_nonce:siteConfig.ajaxNonce,current_post_id:e||0,current_post_type:t||""})}).then((e=>e.json())).then((e=>{if(e.success&&e.data.post_modification){const{dispatch:e,select:t}=wp.data,s=t("core/editor").isSavingPost(),n="publish"===t("core/editor").getEditedPostAttribute("status"),o="draft"===t("core/editor").getEditedPostAttribute("status");if(s||n||o){e("core/editor").lockPostSaving("disable-save"),e("core/editor").lockPostSaving("disable-draft"),e("core/editor").lockPostAutosaving(),e("core/notices").removeNotice("post-save-disabled"),e("core/editor").lockPostSaving("requiredValueLock"),e("core/editor").removeEditorPanel("post-link");const t=document.querySelector(".interface-interface-skeleton__header");t&&t.remove(),document.querySelector(".interface-interface-skeleton__sidebar");const s=document.querySelector(".editor-post-save-draft");s&&s.remove();const n=document.querySelector(".editor-post-saved-state");n&&n.remove();const o=document.querySelector(".editor-post-publish-button");o&&(o.style.display="none");const r=document.querySelector(".submit");r&&(r.style.display="none");const a=document.querySelector("#submit");a&&(a.style.display="none");const c=document.querySelector(".edit-tag-actions");c&&(c.style.display="none");const i=document.querySelector(".view-grid");i&&(i.style.display="none"),document.querySelectorAll(".components-icon-button").forEach((function(e){e.style.display="none"}));const d=document.querySelector(".page-title-action");d&&(d.style.display="none");const l=document.querySelector(".insert-media");l&&(l.disabled=!0);const p=document.querySelectorAll(".upload_image_button");p.forEach((function(e){e.disabled=!0}));const u=document.querySelector(".editor-post-switch-to-draft");u&&(u.disabled=!0),document.querySelectorAll(".components-notice-list").forEach((function(e){e.style.display="none"}));const m=document.querySelector(".edit-post-header");m&&m.remove(),p.forEach((function(e){e.style.display="none"}));const y=document.querySelector("#template");if(y&&(y.style.display="none"),"undefined"!=typeof editor&&void 0!==wp.data){e("core/editor").disablePublishSidebar();const{removeEditorPanel:t}=e("core/editor");t("post-link")}e("core/notices").createNotice("warning","You are not permitted to edit this content as it is managed by the central site.",{id:"post-save-disabled",isDismissible:!1,speak:!0});const g=document.querySelector(".editor-post-publish-button"),h=document.querySelector(".editor-post-save-draft");h&&(h.disabled=!0,h.style.pointerEvents="none"),g&&g.setAttribute("disabled","disabled")}else{e("core/editor").unlockPostSaving("disable-save"),e("core/notices").removeNotice("post-save-disabled");const t=document.querySelector(".editor-post-publish-button"),s=document.querySelector(".editor-post-save-draft");t&&t.removeAttribute("disabled"),s&&s.removeAttribute("disabled")}}})).catch((e=>{console.log("Error in AJAX request: ",e);const{dispatch:t}=wp.data;t("core/editor").unlockPostSaving("disable-save"),t("core/notices").removeNotice("post-save-disabled")}))}(t,s))}))}if(e){const s=t.querySelector("td");e.addEventListener("change",(function(){const e=this.value;if(!e)return t.style.display="none",void(s.innerHTML="");t.style.display="table-row";const n=new FormData;n.append("action","get_subsites"),n.append("central_site_id",e),fetch(siteConfig.ajaxUrl,{method:"POST",body:n}).then((e=>e.json())).then((e=>{e.success?s.innerHTML=e.data.html:s.innerHTML="<p>No subsites available for syncing.</p>"})).catch((e=>{console.error("Error fetching subsites:",e),s.innerHTML="<p>Error loading subsites. Please try again.</p>"}))}))}n&&n.addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(this);t.append("action","centralized_content_management_save_network_settings"),r.style.visibility="visible",n.querySelector('button[type="submit"]').disabled=!0,fetch(siteConfig.ajaxUrl,{method:"POST",body:t}).then((e=>e.json())).then((e=>{s.innerHTML="",e.success?E("success",e.data.message):E("error",e.data.message)})).catch((e=>{console.error("Error:",e),E("error","An error occurred while saving settings.")})).finally((()=>{r.style.visibility="hidden",n.querySelector('button[type="submit"]').disabled=!1}))})),o&&o.addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(this);t.append("action","centralized_content_management_save_central_site_settings"),r.style.visibility="visible",o.querySelector('button[type="submit"]').disabled=!0,fetch(siteConfig.ajaxUrl,{method:"POST",body:t}).then((e=>e.json())).then((e=>{s.innerHTML="",e.success?E("success",e.data.message):(e.data.is_checked&&(o.querySelector("#ccm_post_approval").checked=!0),E("error",e.data.message))})).catch((e=>{console.error("Error:",e),E("error","An error occurred while saving settings.")})).finally((()=>{r.style.visibility="hidden",o.querySelector('button[type="submit"]').disabled=!1}))}));const a=document.getElementById("resetLogFilterButton");a&&a.addEventListener("click",(function(e){document.getElementById("logFilterForm").reset(),window.location.href=window.location.pathname+"?page=md-ccm-sync-logs"}));const c=document.getElementById("bulkSyncButton");function i(e,t,s,n){const o=document.getElementById("bulkSyncFilterForm"),r=document.getElementById("bulkSyncButton"),a=document.querySelector(".bulk-sync-spinner"),c=document.getElementById("syncProgress"),d=document.getElementById("syncProgressBar"),l=document.getElementById("syncProgressBarPercentage");let p=document.getElementById("syncProgressBarMessage"),u=!1;a&&a.remove();const m=document.createElement("span");m.classList.add("spinner","bulk-sync-spinner"),m.style.float="none",m.style.margin="3px 0 3px 8px",r.insertAdjacentElement("afterend",m),m.style.visibility="visible";const y=document.getElementById("syncProgressContainer"),g=t.split(",").filter((e=>""!==e.trim())).length;0===s&&(p.innerHTML=g>50?"Sync has started. You’ve selected over <strong>50 posts</strong>, so this may take a few moments. Please stay on this page until it’s complete.":"Sync has started and may take some time. Please stay on this page until it’s complete."),e.length>0&&t.length>0&&(y.style.display="block"),r.disabled=!0;const h=new FormData(o);h.append("selected_sites",e),h.append("selected_posts",t),h.append("current_batch",s),h.append("action","handle_bulk_sync_process"),fetch(siteConfig.ajaxUrl,{method:"POST",body:h}).then((e=>e.json())).then((s=>{if(s.success){let r=s.total_batches,a=s.current_batch;const m=Array.isArray(s.logs)?s.logs:Object.values(s.logs),y=Math.round((a+1)/r*100);d.value=y,l.textContent=y+"%",m.length>0&&(p.innerHTML=`Syncing in progress: <strong>${y}%</strong> completed. Please stay on this page until it’s complete.`,m.forEach((e=>{const t=document.createElement("tr"),s=document.createElement("td");s.textContent=e.log_data?.post_name||"No Title",t.appendChild(s);const n=document.createElement("td");n.textContent=e.log_data?.site_name||"Unknown Site",t.appendChild(n);const o=document.createElement("td"),r=document.createElement("span");r.classList.add("sync-status");const a=document.createElement("i"),i=document.createElement("div");switch(i.classList.add("tooltip"),e.sync_status||e.log_data.sync_status){case"Added to Queue":a.classList.add("dashicons","dashicons-info"),i.textContent="The post has been added to the queue, and it will be synced after approval.";break;case"Skipped":default:a.classList.add("dashicons","dashicons-info"),i.textContent=e.log_data?.sync_note||"No details";break;case"Failed":a.classList.add("dashicons","dashicons-dismiss"),i.textContent=e.log_data?.sync_note||"No details";break;case"Synced":a.classList.add("dashicons","dashicons-yes-alt"),i.textContent=e.log_data?.sync_note||"No details"}r.appendChild(a),r.append(` ${e.log_data?.sync_status||"No details"}`),r.appendChild(i),o.appendChild(r),t.appendChild(o),c.appendChild(t)}))),a++,a<r?i(e,t,a,n):(p.textContent="The sync process has been completed. Please check the sync logs below",o.reset(),document.getElementById("filtered-posts-list").innerHTML='<li class="response-item"><span>No data found.</span></li>',document.getElementById("selected-posts-list").innerHTML="",document.getElementById("selected-post-ids").value="",document.getElementById("filter_by_post_title").value="",u=!0)}else r.disabled=!1,E("error",s.message)})).catch((e=>{console.error("Error:",e),r.disabled=!1,E("error","An error occurred while processing the request.")})).finally((()=>{u&&(r.disabled=!1),m&&m.remove()}))}c&&c.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelectorAll(".bulk-sync-subsite"),n=document.getElementById("selected-post-ids").value,o=[],r=s.querySelector(".notice");r&&r.remove();const a=document.getElementById("syncProgressContainer"),c=a.querySelector("#syncProgress");document.getElementById("syncProgressBar").value="",document.getElementById("syncProgressBarPercentage").textContent="0%",c.querySelectorAll("tr").length>0&&(c.querySelectorAll("tr").forEach((e=>e.remove())),a.style.display="none"),t.forEach((e=>{e.checked&&o.push(e.value)})),i(o,n,0,10)}));const d=document.getElementById("filter_by_post_type"),l=document.getElementById("filter_by_post_title"),p=document.getElementById("filtered-posts-list");let u=!1,m=0,y=1,g=!1;function h(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}function f(e,t="",s=1){const n=document.getElementById("bulkSyncFilterForm"),o=new FormData(n),r=document.querySelector("#bulkSyncFilterSpinnerId");r&&p.removeChild(r);const a=document.createElement("span");a.className="spinner",a.id="bulkSyncFilterSpinnerId",a.style.float="none",a.style.margin="0 0 3px 5px",p.appendChild(a),a.style.visibility="visible",o.append("action","handle_bulk_sync_filter"),o.append("paged",s),fetch(siteConfig.ajaxUrl,{method:"POST",body:o}).then((e=>e.json())).then((e=>{if(e.success){const t=e.post_type,n=e.found_posts;1===s&&(p.innerHTML="",function(e,t){const s=document.createElement("li");s.textContent="All ( "+t+" records )",s.className="item all",s.setAttribute("title","Click here to add all posts"),s.setAttribute("data-post-type",e),s.setAttribute("id","addAllRecords"),s.addEventListener("click",(()=>{const e=s.getAttribute("data-post-type"),t=new FormData;t.append("action","add_all_post_records"),t.append("post_type",e),fetch(siteConfig.ajaxUrl,{method:"POST",body:t}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return e.json()})).then((e=>{e.success&&Array.isArray(e.posts_array)&&(console.log("Success:",e),e.posts_array.forEach((e=>{v(e.post_id,e.post_title)})))})).catch((e=>{console.error("Error:",e)}))})),p.prepend(s)}(t,n)),e.posts.forEach((e=>{const t=document.createElement("li");t.textContent=h(e.post_title),t.className="item",t.setAttribute("data-id",e.post_id),t.setAttribute("title","Click here to add this post"),t.addEventListener("click",(()=>{v(e.post_id,e.post_title)}));const s=document.createElement("button");s.className="add-post",s.innerHTML='<span class="dashicons dashicons-plus"></span>',s.addEventListener("click",(e=>{e.preventDefault()})),t.appendChild(s),p.appendChild(t)})),u=!1}else{let t=document.querySelectorAll("#filtered-posts-list li").length;if(!u&&0===t){const t=document.createElement("li"),s=document.createElement("span");t.className="response-item",t.appendChild(s),s.textContent=e.message,p.appendChild(t),u=!0}const s=document.querySelector(".spinner");s&&p.removeChild(s)}})).catch((e=>{console.error("Error:",e)})).finally((()=>{const e=document.querySelector("#bulkSyncFilterSpinnerId");e&&p.removeChild(e)}))}d&&d.addEventListener("change",(()=>{d.value;const e=l.value;y=1,g=!1,p.replaceChildren(),f(0,e,y)})),l&&l.addEventListener("keyup",(()=>{const e=l.value;d.value,y=1,f(0,e,y)})),p&&p.addEventListener("scroll",(()=>{const e=p.scrollTop;e>m&&p.scrollTop+p.clientHeight>=p.scrollHeight-10&&(y++,f(d.value,l.value,y)),m=e}));let b=[];function v(e,t){const s=document.getElementById("selected-posts-list"),n=document.getElementById("selected-post-ids");if(s.querySelector(`[data-id="${e}"]`))return;b.includes(e)||b.push(e),n.value=b.join(",");const o=document.createElement("li");o.className="item",o.textContent=h(t),o.setAttribute("data-id",e),o.setAttribute("title","Click here to remove this post");const r=document.createElement("button");r.innerHTML='<span class="dashicons dashicons-trash"></span>',r.className="remove-post",r.addEventListener("click",(()=>function(e){const t=document.getElementById("selected-posts-list"),s=document.getElementById("selected-post-ids");b=b.filter((t=>t!==e));const n=t.querySelector(`[data-id="${e}"]`);n&&t.removeChild(n),s.value=b.join(",")}(e))),o.appendChild(r),s.appendChild(o)}function E(e,t){const n="success"===e?"notice-success":"notice-error",o=s.querySelector(".notice");o&&o.remove();const r=document.createElement("div");r.className=`notice ${n} is-dismissible`,r.innerHTML=`<p>${t}</p>`,s.appendChild(r);const a=document.createElement("button");a.type="button",a.className="notice-dismiss",a.innerHTML='<span class="screen-reader-text">Dismiss this notice.</span>',a.addEventListener("click",(function(){r.style.opacity="0",setTimeout((()=>{r.remove()}),100)})),r.appendChild(a),r.addEventListener("click",(function(e){e.target.classList.contains("notice-dismiss")&&(r.style.opacity="0",setTimeout((()=>{r.remove()}),100))}))}function k(){document.body.classList.add("is-loading")}function S(){document.body.classList.remove("is-loading")}document.querySelectorAll(".show-more-toggle").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();const t=this.previousElementSibling,s=t.querySelectorAll(".synced-data__item.synced-data-hidden"),n=t.querySelectorAll(".synced-data__item");this.querySelector(".dashicons"),s.length>0?(s.forEach((e=>e.classList.remove("synced-data-hidden"))),this.innerHTML="<span>Show Less -</span>",t.classList.remove("sync-data-wrap")):(n.forEach(((e,t)=>{t>=3&&e.classList.add("synced-data-hidden")})),this.innerHTML="<span>Show More +</span>",t.classList.add("sync-data-wrap"))}))})),document.addEventListener("click",(function(e){if(e.target.classList.contains("ccm-approve-request")){var t=e.target.closest("tr"),s=t.getAttribute("data-primary-id"),n=t.getAttribute("data-local-post-id");document.querySelector(".ccm-conf-msg").style.display="block",document.querySelector("ul.ccm-approve-action-btn").style.display="flex";var o=document.querySelector(".popup-alert-message");o.textContent="",o.classList.remove("success","error");var r=document.querySelector(".gatekeeper-approve");r.setAttribute("data-primary-id",s),r.setAttribute("data-masthead-post-id",n),r.style.display="block"}})),document.addEventListener("click",(function(e){if(e.target.matches(".ccm-approve-action-btn button")){var t=e.target,s=t.getAttribute("data-btn-action");"no"===s?document.querySelector(".ccm-popup-model").style.display="none":"yes"===s&&function(e){k();var t=document.querySelector(".gatekeeper-approve").getAttribute("data-primary-id"),s=e.closest(".ccm-popup-model"),n=s.querySelector(".popup-alert-message"),o={action:"centralized_content_management_content_queue_approve_request",ajax_nonce:siteConfig.ajaxNonce,primaryId:t};fetch(`${siteConfig.ajaxUrl}?${new URLSearchParams(o)}`,{method:"GET"}).then((e=>e.json())).then((e=>{1===e.err?(n.textContent=e.message,n.classList.add("error"),n.style.display="block"):0===e.err?(document.querySelector(".ccm-conf-msg").style.display="none",document.querySelector("ul.ccm-approve-action-btn").style.display="none",n.textContent=e.message,n.classList.add("success"),n.style.display="block",s.querySelector(".ccm-popup-modal-close").classList.add("need-reload")):(n.textContent="Something went wrong! Reload the page and try again!",n.classList.add("error"),n.style.display="block"),S()})).catch((e=>{console.error(e),n.textContent="Something went wrong! Reload the page and try again!",n.classList.add("error"),n.style.display="block",S()}))}(t)}})),document.addEventListener("click",(function(e){if(e.target.classList.contains("ccm-reject-request")){var t=e.target.closest("tr"),s=t.getAttribute("data-primary-id"),n=t.getAttribute("data-central-post-id"),o=t.getAttribute("data-post-title"),r=t.getAttribute("data-user");document.querySelector(".reject-message").value="";var a=document.querySelector(".popup-alert-message");a.textContent="",a.classList.remove("success","error"),document.querySelector(".gatekeeper-reject form").style.display="block",document.querySelector("ul.reject-action-btn").style.display="flex";var c=document.querySelector(".gatekeeper-reject");c.setAttribute("data-central-post-id",n),c.setAttribute("data-post-title",o),c.setAttribute("data-user",r),c.setAttribute("data-primary-id",s),c.style.display="block"}})),document.addEventListener("click",(function(e){if(e.target.matches(".reject-action-btn button")){var t=e.target.getAttribute("data-btn-action");if("no"===t)e.target.closest(".ccm-popup-model").style.display="none";else if("yes"===t){var s=document.querySelector(".gatekeeper-reject"),n=s.getAttribute("data-primary-id"),o=s.getAttribute("data-post-title"),r=s.getAttribute("data-user"),a=s.getAttribute("data-central-post-id"),c=document.querySelector(".reject-message").value.trim(),i=e.target.closest(".ccm-popup-model"),d=i.querySelector(".popup-alert-message");if(!c)return d.textContent="Message cannot be blank.",d.classList.add("error"),void(d.style.display="block");k();var l={action:"centralized_content_management_reject_request",ajax_nonce:siteConfig.ajaxNonce,primaryId:n,rejectMsg:c,postTitle:o,centralPostId:a,postUser:r};fetch(siteConfig.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}).then((e=>e.json())).then((e=>{1===e.err?(d.textContent=e.message,d.classList.add("error"),d.style.display="block"):0===e.err?(document.querySelector(".gatekeeper-reject form").style.display="none",document.querySelector("ul.reject-action-btn").style.display="none",d.textContent=e.message,d.classList.add("success"),d.style.display="block",i.querySelector(".ccm-popup-modal-close").classList.add("need-reload")):(d.textContent="Something went wrong! Reload the page and try again!",d.classList.add("error"),d.style.display="block"),S()})).catch((e=>{console.error(e),d.textContent="Something went wrong! Reload the page and try again!",d.classList.add("error"),d.style.display="block",S()}))}}})),document.addEventListener("click",(function(e){e.target.matches(".ccm-popup-modal-close")&&(e.target.classList.contains("need-reload")?location.reload():e.target.closest(".ccm-popup-model").style.display="none")})),document.addEventListener("click",(function(e){if(e.target.matches(".ccm-preview-request")){var t=e.target.closest("tr"),s=t.getAttribute("data-primary-id"),n=t.getAttribute("data-local-post-id"),o=t.getAttribute("data-central-post-id"),r=t.getAttribute("data-post-title"),a=t.getAttribute("data-post-type"),c=document.querySelector(".gatekeeper-preview-changes"),i=c.querySelector(".popup-alert-message"),d=document.querySelector(".ccm-popup-table-wrap");i.textContent="",i.classList.remove("success","error"),k();var l={action:"centralized_content_management_cental_subsite_preview",ajax_nonce:siteConfig.ajaxNonce,primaryId:s,localPostId:n,postType:a,centralPostId:o,postTitle:r};fetch(`${siteConfig.ajaxUrl}?${new URLSearchParams(l)}`,{method:"GET"}).then((e=>e.json())).then((e=>{d.innerHTML="",1===e.err?(i.textContent=e.diff,i.classList.add("error"),i.style.display="block"):d.innerHTML=e.diff,S(),c.style.display="block"})).catch((e=>{console.error(e),i.textContent="Something went wrong! Reload the page and try again!",i.classList.add("error"),i.style.display="block",c.style.display="block",S()}))}})),"undefined"!=typeof siteConfig&&siteConfig.restrictedPosts&&siteConfig.restrictedPosts.forEach((function(e){var t=document.querySelector("tr#post-"+e);if(t){var s=t.querySelector('th.check-column input[type="checkbox"]');s&&(s.disabled=!0,s.style.cursor="not-allowed",s.setAttribute("title","You are not permitted to edit this content as it is managed by the central site."));var n=t.querySelector(".row-title");n&&n.insertAdjacentHTML("afterend",'<span style="color: #50575e;margin-left: 8px;">— Restricted</span>')}}))})),jQuery(document).ready((function(e){e("#md-ccm-header").sticky({topSpacing:20,zIndex:100,stopper:"",stickyClass:"md-ccm-header-sticky"})}))})()})();